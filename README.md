<div align="center">
  <h1>< â­AWS-DeepRacerðŸš˜ ></h1>
  - AWS DeepRacer reinforcement learning model creation training -
</div>

## ìš°ë¦¬ íŒ€ì˜ ëª©í‘œ (Our team's goal)
- ì˜ˆì„  í†µê³¼ ( ì œë°œ!! )

## AWS DeepRacerëž€?
### AWS DeepRacerëŠ” ê°•í™” í•™ìŠµìœ¼ë¡œ êµ¬ë™ë˜ëŠ” ì™„ì „ ìžìœ¨ ì£¼í–‰ (1/18 ë¹„ìœ¨ì˜) ê²½ì£¼ìš© ìžë™ì°¨ìž„.
- AWS DeepRacer ì½˜ì†”: 3ì°¨ì› ì‹œë®¬ë ˆì´ì…˜ ìžìœ¨ ì£¼í–‰ í™˜ê²½ì—ì„œ ê°•í™” í•™ìŠµ ëª¨ë¸ì„ í›ˆë ¨ ë° í‰ê°€í•˜ê¸° ìœ„í•œ AWS ê¸°ê³„ í•™ìŠµ ì„œë¹„ìŠ¤
  * ì½˜ì†”ì„ ì‚¬ìš©í•˜ë©´ ê°•í™” í•™ìŠµ ëª¨ë¸ì„ í›ˆë ¨í•˜ê±°ë‚˜, AWS DeepRacer ì‹œë®¬ë ˆì´í„°ì—ì„œ ëª¨ë¸ ì„±ëŠ¥ì„ í‰ê°€í•  ìˆ˜ ìžˆë‹¤.
- AWS DeepRacer ì°¨ëŸ‰: ìžìœ¨ ì£¼í–‰ì„ ëª©ì ìœ¼ë¡œ í›ˆë ¨ëœ AWS DeepRacer ëª¨ë¸ì— ëŒ€í•´ ì¶”ë¡ ì„ ì‹¤í–‰í•  ìˆ˜ ìžˆëŠ” 1/18 ë¹„ìœ¨ì˜ RC ìžë™ì°¨
  * AWS DeepRacer ì°¨ëŸ‰ì€ Wi-Fiê°€ ì§€ì›ë˜ëŠ” ë¬¼ë¦¬ì  ì°¨ëŸ‰ìœ¼ë¡œì„œ ë¬¼ë¦¬ì  íŠ¸ëž™ì—ì„œ ê°•í™” í•™ìŠµ ëª¨ë¸ì„ ì‚¬ìš©í•´ ìŠ¤ìŠ¤ë¡œ ì£¼í–‰í•  ìˆ˜ ìžˆë‹¤.
 
## ê°•í™” í•™ìŠµ(Reinforcement Learning)
### AWS DeepRacerì—ì„œ ê°•í™” í•™ìŠµì˜ ëª©ì ì€ ìž„ì˜ í™˜ê²½ì—ì„œ ìµœì ì˜ ì •ì±…ðŸ“‘ì„ í•™ìŠµðŸ‘¨â€ðŸ«í•˜ëŠ” ë° ìžˆë‹¤. (í•µì‹¬)
- ì—¬ê¸°ì—ì„œ í•™ìŠµì´ëž€ ì‹œí–‰ ì°©ì˜¤ê°€ ë°˜ë³µðŸ”„ë˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ë§í•œë‹¤.
- ì—ì´ì „íŠ¸ëŠ” ë¬´ìž‘ìœ„ë¡œ ì´ˆê¸° í–‰ë™ì„ ë³´ì´ë©´ì„œ ìƒˆë¡œìš´ ìƒíƒœì— ë„ë‹¬í•œë‹¤.
- ê·¸ëŸ° ë‹¤ìŒ í•´ë‹¹ ë‹¨ê³„ë¥¼ ë°˜ë³µí•˜ì—¬ ìƒˆë¡œìš´ ìƒíƒœì—ì„œ ë‹¤ìŒ ìƒíƒœë¡œ ë„˜ì–´ê°„ë‹¤.
- ì—ì´ì „íŠ¸ëŠ” ì‹œê°„ì´ ì§€ë‚˜ë©´ì„œ ì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ ìž¥ê¸°ì  ë³´ìƒðŸŽì„ ê·¹ëŒ€í™”í•˜ëŠ” í–‰ë™ì„ ë°œê²¬í•œë‹¤.
- ì´ˆê¸° ìƒíƒœì—ì„œ ìµœì¢… ìƒíƒœê¹Œì§€ ì´ì–´ì§€ëŠ” ì—ì´ì „íŠ¸ì˜ ìƒí˜¸ ìž‘ìš©ì„ ì—í”¼ì†Œë“œ(Episode)ë¼ê³  ë¶€ë¥¸ë‹¤.
### ë‹¤ìŒì€ í•™ìŠµ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.
- [ Agent ] -> action a(Subscript t) -> [ Environment ] -> state s(t+1), reward r(t+1) -> [ Agent ]
- ì—ì´ì „íŠ¸ëŠ” ì‹ ê²½ë§ì„ êµ¬ì²´í™”í•˜ê³ , ì‹ ê²½ë§ì€ ì—ì´ì „íŠ¸ì˜ ì •ì±…ì— ëŒ€í•œ ê·¼ì‚¬ í•¨ìˆ˜ë¥¼ í‘œí˜„í•œë‹¤.
- ì°¨ëŸ‰ì˜ ì •ë°© ì¹´ë©”ë¼ì—ì„œ ì´¬ì˜ëœ ì´ë¯¸ì§€ëŠ” í™˜ê²½ ìƒíƒœì´ê³ , ì—ì´ì „íŠ¸ í–‰ë™ì€ ì—ì´ì „íŠ¸ì˜ **ì†ë„**ì™€ **ì¡°í–¥ ê°ë„**ë¡œ ê²°ì •ëœë‹¤.
- *ì—ì´ì „íŠ¸ê°€ íŠ¸ëž™ì„ ë²—ì–´ë‚˜ì§€ ì•Šê³  ì™„ì£¼í•˜ë©´ ì–‘ì˜ ë³´ìƒì„, ê·¸ë¦¬ê³  íŠ¸ëž™ì—ì„œ ë²—ì–´ë‚˜ë©´ ìŒì˜ ë³´ìƒì„ ë°›ëŠ”ë‹¤.*
- ê·¸ë¦¬ê³  **ì—í”¼ì†Œë“œëŠ” ë ˆì´ìŠ¤ íŠ¸ëž™ì˜ ìž„ì˜ êµ¬ê°„ì—ì„œ ì—ì´ì „íŠ¸ì™€ í•¨ê»˜ ì‹œìž‘ë˜ì–´ ì—ì´ì „íŠ¸ê°€ íŠ¸ëž™ì—ì„œ ë²—ì–´ë‚˜ê±°ë‚˜ í•œ ë°”í€´ë¥¼ ì™„ì£¼í•  ë•Œ ì¢…ë£Œëœë‹¤.**

## í–‰ë™ ê³µê°„ ë° ë³´ìƒ í•¨ìˆ˜
- ê°•í™” í•™ìŠµì—ì„œëŠ” ì—ì´ì „íŠ¸ê°€ í™˜ê²½ê³¼ ìƒí˜¸ ìž‘ìš©í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ” ëª¨ë“  ìœ íš¨í•œ í–‰ë™ ë˜ëŠ” ì„ íƒì˜ ì§‘í•©ì„ **í–‰ë™ ê³µê°„**ì´ë¼ê³  í•œë‹¤.
- AWS DeepRacer ì°¨ëŸ‰ì€ *íšŒì „ì´ ê°€ê¹Œì›Œì§€ë©´ ê°€ì† ë˜ëŠ” ì œë™* í›„ **ì¢ŒíšŒì „**, **ìš°íšŒì „** ë˜ëŠ” **ì§ì§„** ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•  ìˆ˜ ìžˆë‹¤.
- ì´ëŸ¬í•œ ë™ìž‘ì€ ì¡°í–¥ ê°ë„ì™€ ì†ë„ì˜ ì¡°í•©ìœ¼ë¡œ ì •ì˜ë˜ì–´ ì—ì´ì „íŠ¸ë¥¼ ìœ„í•œ ì˜µì…˜ ë©”ë‰´(0~9)ë¥¼ ìƒì„±í•œë‹¤.
- ì˜ˆë¥¼ ë“¤ì–´ 0ì€ -30ë„ ë° 0.4m/s, 1ì€ -30ë„ ë° 0.8m/s, 2ëŠ” -15ë„ ë° 0.4m/s, 3ì€ -15ë„ ë° 0.8m/s, 3ì€ -15ë„ ë° 0.8m/s ë“± 9ê¹Œì§€ ë‚˜íƒ€ë‚¼ ìˆ˜ ìžˆë‹¤.
- ê°ë„ê°€ *ìŒìˆ˜*ì´ë©´ ì°¨ë¥¼ **ì˜¤ë¥¸ìª½**ìœ¼ë¡œ ëŒë¦¬ê³ , *ì–‘ìˆ˜*ì´ë©´ ì°¨ë¥¼ **ì™¼ìª½**ìœ¼ë¡œ ëŒë¦¬ê³ , 0ì´ë©´ ë°”í€´ê°€ ë˜‘ë°”ë¡œ ìœ ì§€ëœë‹¤.
### ë³´ìƒ í•¨ìˆ˜(Reward Function)
- ì—ì´ì „íŠ¸ëŠ” í™˜ê²½ì„ íƒìƒ‰í•˜ë©´ì„œ ê°€ì¹˜ í•¨ìˆ˜ë¥¼ í•™ìŠµí•œë‹¤.
- ê°€ì¹˜ í•¨ìˆ˜ëŠ” ì—ì´ì „íŠ¸ê°€ í™˜ê²½ì„ ê´€ì°°í•œ í›„ ì·¨í•œ í–‰ë™ì´ ì–¼ë§ˆë‚˜ ì¢‹ì€ì§€ íŒë‹¨í•˜ëŠ” ë° ë„ì›€ì´ ëœë‹¤.
- ê°€ì¹˜ í•¨ìˆ˜ëŠ” AWS DeepRacer ì½˜ì†”ì—ì„œ ìž‘ì„±í•œ ë³´ìƒ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ í–‰ë™ì— ì ìˆ˜ë¥¼ ë§¤ê¸´ë‹¤.
- ì˜ˆë¥¼ ë“¤ì–´, AWS DeepRacer ì½˜ì†”ì˜ ì„¼í„° ë¼ì¸ ë”°ë¥´ê¸° ìƒ˜í”Œ ë³´ìƒ ê¸°ëŠ¥ì—ì„œ ì¢‹ì€ í–‰ë™ì€ ì—ì´ì „íŠ¸ë¥¼ íŠ¸ëž™ ì¤‘ì•™ì— ê°€ê¹ê²Œ ìœ ì§€í•˜ê³  ì—ì´ì „íŠ¸ë¥¼ íŠ¸ëž™ ì¤‘ì•™ì—ì„œ ë©€ì–´ì§€ê²Œ í•˜ëŠ” ìž˜ëª»ëœ í–‰ë™ë³´ë‹¤ ë†’ì€ ì ìˆ˜ë¥¼ ë°›ê²Œ í•˜ëŠ” ê²ƒì´ë‹¤.

## ìš°ë¦¬íŒ€ì´ ì‚¬ìš©í•œ ë³´ìƒí•¨ìˆ˜(RF)
```python
import math

""" íŠ¸ëž™ì˜ ì§„í–‰ ë°©í–¥ê³¼ ì°¨ëŸ‰ì˜ í˜„ìž¬ í—¤ë”©(heading)ì´
    ì–¼ë§ˆë‚˜ ì¼ì¹˜í•˜ëŠ”ì§€ë¥¼ í‰ê°€í•˜ëŠ” ë³´ìƒ í•¨ìˆ˜ """

# (params)ì— ìŠ¤í…ë§ˆë‹¤ ë„˜ê²¨ì£¼ëŠ” ìƒíƒœ ì •ë³´ë“¤ì´ ë”•ì…”ë„ˆë¦¬ í˜•íƒœë¡œ ë‹´ê²¨ ìžˆìŒ
def reward_function(params):  
    waypoints = params['waypoints'] # íŠ¸ëž™ ìœ„ì˜ ê³ ì •ëœ ì¢Œí‘œ ë¦¬ìŠ¤íŠ¸ ì˜ˆ) [(1,2),(3,4), ... ]
    closest_waypoints = params['closest_waypoints'] # ì°¨ëŸ‰ì— ê°€ìž¥ ê°€ê¹Œìš´ ë‘ ê°œì˜ waypoint ì¸ë±ìŠ¤ ê°’ [ì•ž, ë’¤]
    heading = params['heading'] # ì°¨ëŸ‰ì´ í˜„ìž¬ ë°”ë¼ë³´ê³  ìžˆëŠ” ë°©í–¥(degree)

    reward = 1.0

    # ì°¨ëŸ‰ì˜ ì§„í–‰ ë°©í–¥ì„ ê³„ì‚°í•˜ê¸° ìœ„í•œ, í˜„ìž¬ ìœ„ì¹˜ ê¸°ì¤€ì˜
    # ì´ì „ waypointì™€ ë‹¤ìŒ waypointë¥¼ ì„ ì–¸
    next_point = waypoints[closest_waypoints[1]] # ë‹¤ìŒ waypoint
    prev_point = waypoints[closest_waypoints[0]] # ì´ì „ waypoint

    # ì°¨ëŸ‰ì´ ë”°ë¼ê°€ì•¼ í•  ì§„í–‰ ë°©í–¥ì„ êµ¬í•˜ê¸° ìœ„í•œ ê¸°ì¤€
    track_direction = math.atan2(next_point[1] - prev_point[1], next_point[0] - prev_point[0])
    # Arctan(waypoint yì˜ ì°¨ì´, waypoint xì˜ ì°¨ì´) [ê°ë„ì˜ ë¼ë””ì•ˆ ë‹¨ìœ„]
    track_direction = math.degrees(track_direction) # ë¼ë””ì•ˆì„ ê°ë„(degree)ë¡œ ë°”ê¿ˆ
    direction_diff = abs(track_direction - heading) # ì‹¤ì œ ì°¨ëŸ‰ì´ ë°”ë¼ë³´ê³  ìžˆëŠ” ê°’ì˜ ì°¨ì´ë¥¼ êµ¬í•¨
    if direction_diff > 180: # 180ë„ ì´ìƒì´ë©´ ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ë„ëŠ”ê²Œ íš¨ìœ¨ì 
        direction_diff = 360 - direction_diff # ê°ë„ëŠ” ì›í˜•ì´ê¸°ì— (360 - ì°¨ì´)ë¡œ ê³„ì‚°
    DIRECTION_THRESHOLD = 10.0 # ë°©í–¥ì˜ ìž„ê³„ê°’(ê¸°ì¤€ê°ë„)
    if direction_diff > DIRECTION_THRESHOLD: # 10ë„ ì´ìƒ ì°¨ì´ë‚˜ë©´
        reward *= max(0.0, 1.0 - (direction_diff / 50)) # ê°ë„ ì°¨ì´ì— ë”°ë¼ ë³´ìƒê°’ì„ ìœ ì—°í•˜ê²Œ ê¹Žì•„ë²„ë¦¼

    return float(reward)
```

## ëŒ€íšŒ ê²°ê³¼ [ ê²½ê¸°ëŒ€ ì œ3íšŒ AWS DeepRacer ê²½ì§„ëŒ€íšŒ ]
### ìš°ìŠ¹! ðŸ† (Team: Z1ì¡´ëíŒì¢…ê²°ZA)
> [![Video](http://img.youtube.com/vi/YPxOdy3E4a0/0.jpg)](https://www.youtube.com/watch?v=YPxOdy3E4a0)
